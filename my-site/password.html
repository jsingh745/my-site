<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Password Generator</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header>
  <nav>
    <ul>
      <li><a class="nav-home" href="index.html">Home</a></li>
      <li><a class="nav-tools" href="tools.html">Tools</a></li>
      <li><a class="nav-products" href="products.html">Products</a></li>
      <li><a class="nav-contact" href="contact.html">Contact</a></li>
    </ul>
  </nav>
</header>

<div class="container">
  <h1>Password Generator</h1>
  <p class="sub">Generate a strong password fast. Nothing is saved.</p>

  <div class="card">
    <label>Length</label>
    <input id="len" type="number" min="8" max="64" value="16">

    <label><input id="upper" type="checkbox" checked> Include uppercase (A–Z)</label>
    <label><input id="lower" type="checkbox" checked> Include lowercase (a–z)</label>
    <label><input id="nums" type="checkbox" checked> Include numbers (0–9)</label>
    <label><input id="syms" type="checkbox"> Include symbols (!@#)</label>

    <div style="margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
      <button class="btn" type="button" id="gen">Generate</button>
      <button class="btn" type="button" id="copy">Copy</button>
      <button class="btn" type="button" id="clear">Clear</button>
    </div>

    <label style="margin-top:14px;">Your password</label>
    <input id="out" type="text" readonly placeholder="Click Generate">

    <p class="note" id="msg" style="margin-top:10px;"></p>
  </div>
</div>

<script>
  const lenEl = document.getElementById("len");
  const upperEl = document.getElementById("upper");
  const lowerEl = document.getElementById("lower");
  const numsEl  = document.getElementById("nums");
  const symsEl  = document.getElementById("syms");
  const outEl   = document.getElementById("out");
  const msgEl   = document.getElementById("msg");

  const sets = {
    upper: "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
    lower: "abcdefghijklmnopqrstuvwxyz",
    nums:  "0123456789",
    syms:  "!@#$%^&*()-_=+[]{};:,.?/|"
  };

  function pickRandom(str) {
    const arr = new Uint32Array(1);
    crypto.getRandomValues(arr);
    return str[arr[0] % str.length];
  }

  function shuffle(str) {
    const a = str.split("");
    for (let i = a.length - 1; i > 0; i--) {
      const r = new Uint32Array(1);
      crypto.getRandomValues(r);
      const j = r[0] % (i + 1);
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a.join("");
  }

  function generate() {
    msgEl.textContent = "";
    const length = Number(lenEl.value);

    let pool = "";
    const required = [];

    if (upperEl.checked) { pool += sets.upper; required.push(pickRandom(sets.upper)); }
    if (lowerEl.checked) { pool += sets.lower; required.push(pickRandom(sets.lower)); }
    if (numsEl.checked)  { pool += sets.nums;  required.push(pickRandom(sets.nums)); }
    if (symsEl.checked)  { pool += sets.syms;  required.push(pickRandom(sets.syms)); }

    if (!pool) {
      msgEl.textContent = "Pick at least one option.";
      outEl.value = "";
      return;
    }

    if (length < required.length) {
      msgEl.textContent = "Length is too short for your options.";
      outEl.value = "";
      return;
    }

    let result = required.join("");
    while (result.length < length) {
      result += pickRandom(pool);
    }

    outEl.value = shuffle(result);
  }

  document.getElementById("gen").addEventListener("click", generate);

  document.getElementById("copy").addEventListener("click", async () => {
    if (!outEl.value) { msgEl.textContent = "Nothing to copy yet."; return; }
    try {
      await navigator.clipboard.writeText(outEl.value);
      msgEl.textContent = "Copied.";
    } catch {
      outEl.select();
      document.execCommand("copy");
      msgEl.textContent = "Copied.";
    }
  });

  document.getElementById("clear").addEventListener("click", () => {
    outEl.value = "";
    msgEl.textContent = "";
  });

  generate();
</script>

</body>
</html>
